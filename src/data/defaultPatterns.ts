import type { CabinetPattern } from '../types';

// ============================================
// Default Cabinet Patterns
// ============================================

const now = new Date().toISOString();

export const defaultPatterns: CabinetPattern[] = [
  {
    id: 'base-unit-2-drawers',
    name: 'Base Unit - 2 Drawers',
    description: 'Standard base cabinet with 2 equal-height drawers',
    category: 'base',
    zones: [
      {
        id: 'drawer-1',
        type: 'drawer',
        name: 'Top Drawer',
        heightExpression: '(total_height - material_thickness * 2) / 2',
        options: { hasFront: true, drawerSlideOffset: 12.5 },
      },
      {
        id: 'drawer-2',
        type: 'drawer',
        name: 'Bottom Drawer',
        heightExpression: '(total_height - material_thickness * 2) / 2',
        options: { hasFront: true, drawerSlideOffset: 12.5 },
      },
    ],
    partRules: [
      // Sides (2x) - uses side_height for construction-aware height
      {
        id: 'sides',
        partName: 'Side Panel',
        lengthExpression: 'side_height',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      // Top & Bottom - uses bottom_width for construction-aware width
      {
        id: 'top-bottom',
        partName: 'Top/Bottom Panel',
        lengthExpression: 'bottom_width',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      // Drawer Fronts - uses door_gap for surrounding clearance
      {
        id: 'drawer-fronts',
        partName: 'Drawer Front',
        lengthExpression: 'total_width - door_gap - 1',
        widthExpression: '(total_height - door_gap - 1) / 2',
        quantityExpression: '2',
        grain: 'width',
        edgeBanding: { length1: true, length2: true, width1: true, width2: true },
      },
      // Drawer Box Sides - uses context variables for clearances
      {
        id: 'drawer-sides',
        partName: 'Drawer Side',
        lengthExpression: 'total_depth - drawer_depth_clearance',
        widthExpression: '(total_height - material_thickness * 2) / 2 - drawer_box_height_clearance',
        quantityExpression: '4',
        grain: 'length',
      },
      // Drawer Box Front/Back - uses drawer_slide_offset for slide clearance
      {
        id: 'drawer-fb',
        partName: 'Drawer Front/Back',
        lengthExpression: 'total_width - material_thickness * 2 - drawer_slide_offset * 2 - material_thickness * 2',
        widthExpression: '(total_height - material_thickness * 2) / 2 - drawer_box_height_clearance',
        quantityExpression: '4',
        grain: 'length',
      },
      // Back Panel - uses back_width/back_height with rabbet joints
      {
        id: 'back',
        partName: 'Back Panel',
        lengthExpression: 'back_width',
        widthExpression: 'back_height',
        quantityExpression: '1',
        material: 'HDF',
        grain: 'none',
        joints: {
          length1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          length2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
        },
      },
    ],
    defaultDimensions: { height: 720, width: 600, depth: 560 },
    createdAt: now,
    updatedAt: now,
  },
  {
    id: 'base-unit-door',
    name: 'Base Unit - Single Door',
    description: 'Standard base cabinet with single door and internal shelf',
    category: 'base',
    zones: [
      {
        id: 'door-1',
        type: 'door',
        name: 'Door',
        heightExpression: 'total_height - door_gap - 1',
        options: { hasFront: true, hingeType: 'left', doorOverlay: 2 },
      },
    ],
    partRules: [
      {
        id: 'sides',
        partName: 'Side Panel',
        lengthExpression: 'side_height',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'top-bottom',
        partName: 'Top/Bottom Panel',
        lengthExpression: 'bottom_width',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'shelf',
        partName: 'Adjustable Shelf',
        lengthExpression: 'total_width - material_thickness * 2 - shelf_fit_clearance',
        widthExpression: 'total_depth - back_groove - shelf_inset',
        quantityExpression: '1',
        grain: 'length',
        edgeBanding: { length1: true },
        joints: {
          // Shelf extends into dado on each side (left/right into side panels)
          width1: { jointTypeId: 'dado-6mm', role: 'inserted' },
          width2: { jointTypeId: 'dado-6mm', role: 'inserted' },
        },
      },
      {
        id: 'door',
        partName: 'Door',
        lengthExpression: 'total_width - door_gap - 1',
        widthExpression: 'total_height - door_gap - 1',
        quantityExpression: '1',
        grain: 'width',
        edgeBanding: { length1: true, length2: true, width1: true, width2: true },
      },
      {
        id: 'back',
        partName: 'Back Panel',
        lengthExpression: 'back_width',
        widthExpression: 'back_height',
        quantityExpression: '1',
        material: 'HDF',
        grain: 'none',
        joints: {
          length1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          length2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
        },
      },
    ],
    defaultDimensions: { height: 720, width: 450, depth: 560 },
    createdAt: now,
    updatedAt: now,
  },
  {
    id: 'base-unit-double-door',
    name: 'Base Unit - Double Door',
    description: 'Base cabinet with two doors and adjustable shelf',
    category: 'base',
    zones: [
      {
        id: 'door-left',
        type: 'door',
        name: 'Left Door',
        heightExpression: 'total_height - door_gap - 1',
        options: { hasFront: true, hingeType: 'left' },
      },
      {
        id: 'door-right',
        type: 'door',
        name: 'Right Door',
        heightExpression: 'total_height - door_gap - 1',
        options: { hasFront: true, hingeType: 'right' },
      },
    ],
    partRules: [
      {
        id: 'sides',
        partName: 'Side Panel',
        lengthExpression: 'side_height',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'top-bottom',
        partName: 'Top/Bottom Panel',
        lengthExpression: 'bottom_width',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'shelf',
        partName: 'Adjustable Shelf',
        lengthExpression: 'total_width - material_thickness * 2 - shelf_fit_clearance',
        widthExpression: 'total_depth - back_groove - shelf_inset',
        quantityExpression: '1',
        grain: 'length',
        edgeBanding: { length1: true },
        joints: {
          width1: { jointTypeId: 'dado-6mm', role: 'inserted' },
          width2: { jointTypeId: 'dado-6mm', role: 'inserted' },
        },
      },
      {
        id: 'doors',
        partName: 'Door',
        lengthExpression: '(total_width - door_gap * 2) / 2',
        widthExpression: 'total_height - door_gap - 1',
        quantityExpression: '2',
        grain: 'width',
        edgeBanding: { length1: true, length2: true, width1: true, width2: true },
      },
      {
        id: 'back',
        partName: 'Back Panel',
        lengthExpression: 'back_width',
        widthExpression: 'back_height',
        quantityExpression: '1',
        material: 'HDF',
        grain: 'none',
        joints: {
          length1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          length2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
        },
      },
    ],
    defaultDimensions: { height: 720, width: 800, depth: 560 },
    createdAt: now,
    updatedAt: now,
  },
  {
    id: 'wall-unit-single',
    name: 'Wall Unit - Single Door',
    description: 'Wall-mounted cabinet with single door',
    category: 'wall',
    zones: [
      {
        id: 'door-1',
        type: 'door',
        name: 'Door',
        heightExpression: 'total_height - door_gap - 1',
        options: { hasFront: true, hingeType: 'left' },
      },
    ],
    partRules: [
      {
        id: 'sides',
        partName: 'Side Panel',
        lengthExpression: 'total_height',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'top-bottom',
        partName: 'Top/Bottom Panel',
        lengthExpression: 'total_width - material_thickness * 2',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'shelves',
        partName: 'Adjustable Shelf',
        lengthExpression: 'total_width - material_thickness * 2 - shelf_fit_clearance',
        widthExpression: 'total_depth - back_groove - shelf_inset',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
        joints: {
          width1: { jointTypeId: 'dado-6mm', role: 'inserted' },
          width2: { jointTypeId: 'dado-6mm', role: 'inserted' },
        },
      },
      {
        id: 'door',
        partName: 'Door',
        lengthExpression: 'total_width - door_gap - 1',
        widthExpression: 'total_height - door_gap - 1',
        quantityExpression: '1',
        grain: 'width',
        edgeBanding: { length1: true, length2: true, width1: true, width2: true },
      },
      {
        id: 'back',
        partName: 'Back Panel',
        lengthExpression: 'back_width',
        widthExpression: 'back_height',
        quantityExpression: '1',
        material: 'HDF',
        grain: 'none',
        joints: {
          length1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          length2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
        },
      },
    ],
    defaultDimensions: { height: 720, width: 400, depth: 320 },
    createdAt: now,
    updatedAt: now,
  },
  {
    id: 'drawer-unit-4',
    name: 'Drawer Unit - 4 Drawers',
    description: 'Tall drawer unit with 4 equal drawers',
    category: 'drawer-unit',
    zones: [
      {
        id: 'drawer-1',
        type: 'drawer',
        name: 'Drawer 1',
        heightExpression: '(total_height - material_thickness * 2) / 4',
        options: { hasFront: true },
      },
      {
        id: 'drawer-2',
        type: 'drawer',
        name: 'Drawer 2',
        heightExpression: '(total_height - material_thickness * 2) / 4',
        options: { hasFront: true },
      },
      {
        id: 'drawer-3',
        type: 'drawer',
        name: 'Drawer 3',
        heightExpression: '(total_height - material_thickness * 2) / 4',
        options: { hasFront: true },
      },
      {
        id: 'drawer-4',
        type: 'drawer',
        name: 'Drawer 4',
        heightExpression: '(total_height - material_thickness * 2) / 4',
        options: { hasFront: true },
      },
    ],
    partRules: [
      {
        id: 'sides',
        partName: 'Side Panel',
        lengthExpression: 'total_height',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'top-bottom',
        partName: 'Top/Bottom Panel',
        lengthExpression: 'total_width - material_thickness * 2',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'drawer-fronts',
        partName: 'Drawer Front',
        lengthExpression: 'total_width - door_gap - 1',
        widthExpression: '(total_height - door_gap * 2 - drawer_count + 1) / drawer_count',
        quantityExpression: 'drawer_count',
        grain: 'width',
        edgeBanding: { length1: true, length2: true, width1: true, width2: true },
      },
      {
        id: 'drawer-sides',
        partName: 'Drawer Side',
        lengthExpression: 'total_depth - drawer_depth_clearance',
        widthExpression: '(total_height - material_thickness * 2) / drawer_count - drawer_box_height_clearance',
        quantityExpression: 'drawer_count * 2',
        grain: 'length',
      },
      {
        id: 'drawer-fb',
        partName: 'Drawer Front/Back',
        lengthExpression: 'total_width - material_thickness * 2 - drawer_slide_offset * 2 - material_thickness * 2',
        widthExpression: '(total_height - material_thickness * 2) / drawer_count - drawer_box_height_clearance',
        quantityExpression: 'drawer_count * 2',
        grain: 'length',
      },
      {
        id: 'back',
        partName: 'Back Panel',
        lengthExpression: 'back_width',
        widthExpression: 'back_height',
        quantityExpression: '1',
        material: 'HDF',
        grain: 'none',
        joints: {
          length1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          length2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
        },
      },
    ],
    defaultDimensions: { height: 720, width: 600, depth: 560 },
    variables: { drawer_count: 4 },
    createdAt: now,
    updatedAt: now,
  },
  {
    id: 'tall-pantry',
    name: 'Tall Pantry Cabinet',
    description: 'Full-height pantry with double doors and multiple shelves',
    category: 'tall',
    zones: [
      {
        id: 'door-section',
        type: 'door',
        name: 'Double Doors',
        heightExpression: 'total_height - door_gap - 1',
        options: { hasFront: true, hingeType: 'double' },
      },
    ],
    partRules: [
      {
        id: 'sides',
        partName: 'Side Panel',
        lengthExpression: 'total_height',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'top-bottom',
        partName: 'Top/Bottom Panel',
        lengthExpression: 'total_width - material_thickness * 2',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '2',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'fixed-shelf',
        partName: 'Fixed Shelf',
        lengthExpression: 'total_width - material_thickness * 2',
        widthExpression: 'total_depth - back_groove',
        quantityExpression: '1',
        grain: 'length',
        edgeBanding: { length1: true },
      },
      {
        id: 'adj-shelves',
        partName: 'Adjustable Shelf',
        lengthExpression: 'total_width - material_thickness * 2 - shelf_fit_clearance',
        widthExpression: 'total_depth - back_groove - shelf_inset',
        quantityExpression: '4',
        grain: 'length',
        edgeBanding: { length1: true },
        joints: {
          width1: { jointTypeId: 'dado-6mm', role: 'inserted' },
          width2: { jointTypeId: 'dado-6mm', role: 'inserted' },
        },
      },
      {
        id: 'doors',
        partName: 'Door',
        lengthExpression: '(total_width - door_gap * 2) / 2',
        widthExpression: 'total_height - door_gap - 1',
        quantityExpression: '2',
        grain: 'width',
        edgeBanding: { length1: true, length2: true, width1: true, width2: true },
      },
      {
        id: 'back',
        partName: 'Back Panel',
        lengthExpression: 'back_width',
        widthExpression: 'back_height',
        quantityExpression: '1',
        material: 'HDF',
        grain: 'none',
        joints: {
          length1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          length2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width1: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
          width2: { jointTypeId: 'rabbet-back-3mm', role: 'inserted' },
        },
      },
    ],
    defaultDimensions: { height: 2100, width: 600, depth: 560 },
    createdAt: now,
    updatedAt: now,
  },
];
